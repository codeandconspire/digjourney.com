const html = require('choo/html')
const button = require('../button')
const { i18n } = require('../base')

const text = i18n()

module.exports = book

function book(props) {
  const attrs = Object.assign({}, props.image)
  delete attrs.src

  return html`
    <article class="Book">
      <div class="u-container">
        <div class="Book-content">
          ${props.image
            ? html`
                <figure class="Book-figure">
                  <img class="Book-image" ${attrs} src="${props.image.src}" />
                </figure>
              `
            : null}
          <div class="Book-body">
            <h2 class="Book-title">${props.title}</h2>
            ${props.rating
              ? html`
                  <span class="Book-rating" data-rating="${props.rating}">
                    <span class="u-hiddenVisually">
                      ${text`Rating: ${props.rating.length} of 5`}
                    </span>
                  </span>
                `
              : null}
            ${props.author
              ? html`
                  <span class="Book-author">
                    ${text`Written by ${props.author}`}
                  </span>
                `
              : null}
            <div class="Text">
              ${props.body}
              ${props.link
                ? html`
                    <p><a href="${props.link.href}">${props.link.text}</a></p>
                  `
                : null}
            </div>
          </div>
          ${props.action
            ? html`
                <div class="Book-footer">
                  <div class="Book-retailers">
                    <span>${text`Available at`}</span>
                    <svg
                      class="Book-logotype"
                      width="246"
                      height="61"
                      viewBox="0 0 246 61"
                      title="Adlibris">
                      <g fill="#9F9FA1" fill-rule="nonzero">
                        <path
                          d="M12.1 59.2H.7L17.7 8h12L46 59.2h-14l-2-7H14.3l-2.2 7zm12-28.1l-1.6-9-2 9-3.7 12.5h11L24 31.1z" />
                        <path
                          d="M70 2.8h12.3v56.4h-8.6l-3.1-4.7-4 4.8c-1.4.6-3 1-4.5 1-10.7 0-16.2-7.5-16.2-21.5 0-16.8 8.2-22.3 16-22.3 2.9-.1 5.7.7 8 2.3v-16zm0 24.7c-1.6-.8-3.4-1.3-5.2-1.2-4 0-6.1 1.7-6.1 9.5V42c0 7.5 2 10.4 6.1 10.4 2.4 0 3.8-1.4 5.2-2.8V27.5z" />
                        <path d="M89.2 2.8h12.3v56.4H89.2z" />
                        <path
                          d="M108.1 7.2c0-4.1 3-6.5 6.8-6.5 3.7 0 6.7 2.4 6.7 6.5 0 4-3 6.3-6.7 6.3s-6.8-2.2-6.8-6.3zm.7 10.2H121v41.8h-12.2V17.4z" />
                        <path
                          d="M134.1 59.4h-6.3V2.8h12.4v17c2.4-2.3 5.6-3.5 9-3.4 10.2 0 15 8 15 22.5 0 13.6-4.7 21.3-15.4 21.3-2.7 0-5.3-.5-7.7-1.7l-3.4-4.8-3.6 5.7zm6-8.3c1.8.9 3.8 1.4 5.8 1.4 3.6 0 5.4-2.8 5.4-10.1v-5.9c0-7.8-1.4-10.2-5.8-10.2a9 9 0 0 0-5.4 2.2V51z" />
                        <path
                          d="M185.1 17.6c1.7-.8 3.6-1.2 5.4-1.2 1.8 0 3.5.5 5 1.6l-2 10.9a15 15 0 0 0-5.9-1 26 26 0 0 0-6.8 1v30.3h-12.4V17.4h8.6l3.6 6.6 4.5-6.4z" />
                        <path
                          d="M197.5 7.2c0-4.1 3-6.5 6.8-6.5 3.7 0 6.7 2.4 6.7 6.5 0 4-3 6.3-6.7 6.3s-6.8-2.2-6.8-6.3zm.6 10.2h12.3v41.8H198V17.4z" />
                        <path
                          d="M215.5 57.6l1-8.6a29 29 0 0 0 10.2 2.3c5 0 6.8-1 6.8-3.9 0-3.3-2.3-2.7-9-4-5.7-1.3-9.8-4.5-9.8-13 0-9.8 6.2-13.9 16-13.9a28 28 0 0 1 12.6 2.5l-1.7 8.9a33 33 0 0 0-9.3-1.7c-5 0-6.6.8-6.6 3.4 0 2.7 2 3 8.8 4.3 6.8 1.3 10.6 4.3 10.6 12.6 0 8.6-5.4 13.8-16.5 13.8-4.5 0-9-.8-13-2.7z" />
                      </g>
                    </svg>
                    <svg
                      class="Book-logotype"
                      width="223"
                      height="60"
                      viewBox="0 0 223 60"
                      title="bokus">
                      <path
                        fill="#9F9FA1"
                        fill-rule="nonzero"
                        d="M44.5 28.7a20.7 20.7 0 0 0-10.7-11.9 19.1 19.1 0 0 0-8.4-1.7c-2 0-3.8.2-5.3.6a16.7 16.7 0 0 0-9.1 5.9h-.3V0H0v58.9h10.1v-6.4h.2c1.5 2.6 3.6 4.5 6.2 5.7a22.3 22.3 0 0 0 17.3.1 20 20 0 0 0 10.9-11.9 28 28 0 0 0-.2-17.7zm-10 13.7c-.6 1.5-1.4 2.9-2.5 4.1a12.4 12.4 0 0 1-9.2 4 12 12 0 0 1-9.2-4 12.7 12.7 0 0 1-3.3-8.9c0-1.7.3-3.3.8-4.8.6-1.5 1.4-2.9 2.5-4.1a12.4 12.4 0 0 1 9.2-4 12 12 0 0 1 9.2 4 12.7 12.7 0 0 1 3.3 8.9c.1 1.6-.2 3.2-.8 4.8zm15.1-4.9a22.5 22.5 0 0 1 6.7-16.3 24.9 24.9 0 0 1 16.5-6.1 24 24 0 0 1 16.5 6.1 21 21 0 0 1 4.9 7.1c1.2 2.8 1.8 5.8 1.8 9.2a22.5 22.5 0 0 1-6.7 16.3 20 20 0 0 1-7.4 4.5 25.3 25.3 0 0 1-18.2.1 21 21 0 0 1-12.3-11.6 23.4 23.4 0 0 1-1.8-9.3zm10.7 0c0 1.7.3 3.3.8 4.8s1.4 2.9 2.5 4.1a12.4 12.4 0 0 0 9.2 4 12 12 0 0 0 9.2-4 12.7 12.7 0 0 0 3.3-8.9c0-1.7-.3-3.3-.8-4.8-.6-1.5-1.4-2.9-2.5-4.1a12.4 12.4 0 0 0-9.2-4 12 12 0 0 0-9.2 4 13.3 13.3 0 0 0-2.5 4.1 16 16 0 0 0-.8 4.8zm62.2-1.9l18.3-19.4h-13.7l-16.5 17.7V0H100v58.9h10.6V37.1h.2l17 21.8h14.1l-19.4-23.3zm60.3 23.3h-10.1V52h-.2c-1 2.1-2.5 4-4.6 5.6a13.5 13.5 0 0 1-8.4 2.4c-2.8 0-5.3-.5-7.2-1.4-1.9-.9-3.6-2.2-4.8-3.7a17.1 17.1 0 0 1-2.7-5.4c-.6-2-.8-4.1-.8-6.3v-27h10.7v21.6l.2 4c.1 1.5.4 2.8.9 4.1a8.2 8.2 0 0 0 2.3 3.2c1 .9 2.5 1.3 4.4 1.3a8.9 8.9 0 0 0 9.2-6.8c.4-1.3.5-2.7.5-4.1V16.2h10.7v42.7h-.1zM213.6 28a10 10 0 0 0-8.4-4.4c-1.4 0-2.8.4-4.2 1.1-1.4.7-2 1.9-2 3.5 0 1.3.6 2.3 1.7 2.9 1.1.6 2.5 1.1 4.3 1.5l5.6 1.3a22 22 0 0 1 5.6 2 13 13 0 0 1 4.3 3.8c1.1 1.6 1.7 3.8 1.7 6.6a11.5 11.5 0 0 1-5.9 10.7 18.2 18.2 0 0 1-5.9 2.3 29.6 29.6 0 0 1-15.8-.7 17 17 0 0 1-7.5-5.2l7.1-6.7c1.4 1.5 2.8 2.8 4.4 3.8a10.5 10.5 0 0 0 10.4.3c.7-.4 1.3-.9 1.7-1.6.4-.7.7-1.3.7-2.2 0-1.5-.6-2.6-1.7-3.3-1.1-.7-2.5-1.3-4.3-1.7-1.7-.4-3.6-.9-5.6-1.2-2-.4-3.8-1-5.6-1.9-1.7-.9-3.1-2.1-4.3-3.6a10.8 10.8 0 0 1-1.7-6.4 12.4 12.4 0 0 1 5.4-10.5c1.6-1.1 3.4-2 5.5-2.5s4.2-.8 6.3-.8c2.8 0 5.7.5 8.4 1.5 2.8 1 5 2.7 6.8 5l-7 6.4z" />
                    </svg>
                  </div>
                  ${button(
                    Object.assign({ theme: 'blue' }, props.action, {
                      text: html`
                        <strong>${props.action.text}</strong>
                      `
                    })
                  )}
                </div>
              `
            : null}
        </div>
      </div>
    </article>
  `
}
